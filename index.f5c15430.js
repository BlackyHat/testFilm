function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},l={},o={},n=t.parcelRequired7c6;null==n&&((n=function(e){if(e in l)return l[e].exports;if(e in o){var t=o[e];delete o[e];var n={id:e,exports:{}};return l[e]=n,t.call(n.exports,n,n.exports),n.exports}var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,t){o[e]=t},t.parcelRequired7c6=n);var i=n("arR5w"),a={};Object.defineProperty(a,"__esModule",{value:!0}),a.default=function(e,t,l){t in e?Object.defineProperty(e,t,{value:l,enumerable:!0,configurable:!0,writable:!0}):e[t]=l;return e};const s=new(0,i.FilmsApiService),r=new class{createModal(){document.querySelector(".js-modal")||(document.querySelector("main").insertAdjacentHTML("beforeend",'<div class="js-modal modal">\n        <div class="js-modal__box modal__box">\n          <button class="modal__icon link button">\n            </button>\n        </div>\n      </div >'),this.modal=document.querySelector(".js-modal"),this.modalBox=document.querySelector(".js-modal__box"))}constructor(){e(a)(this,"addListenerOnClickClose",(()=>{this.modal.addEventListener("click",(e=>{(e.target.classList.contains("js-modal")||e.target.classList.contains("modal__icon"))&&this.closeModal()}))})),e(a)(this,"addListenerOnKeyClose",(()=>{document.addEventListener("keydown",this.onKeyClose)})),e(a)(this,"onKeyClose",(e=>{"Escape"===e.code&&(this.closeModal(),document.removeEventListener("keydown",this.onKeyClose))})),e(a)(this,"closeModal",(()=>{this.modal.remove()})),this.modalBackdrop="",this.modalBox="",this.modal=""}};new class{constructor(){e(a)(this,"getStorage",(e=>{try{const t=localStorage.getItem(e),l=JSON.parse(t);return l||[]}catch(e){console.log(e)}})),e(a)(this,"setStorage",((e,t)=>{localStorage.setItem(e,t)})),e(a)(this,"save",((e,t)=>{try{const l=JSON.stringify(t);localStorage.setItem(e,l)}catch(e){console.error("Set state error: ",e.message)}})),e(a)(this,"load",(e=>{try{const t=localStorage.getItem(e);return null===t?void 0:JSON.parse(t)}catch(e){console.error("Get state error: ",e.message)}}))}};let d={};const c={gallery:document.querySelector(".gallery"),spinner:document.querySelector(".loading")};c.gallery.addEventListener("click",(function(e){if(e.preventDefault(),e.target.closest("li.gallery__item")){const t=e.target.closest("li");r.createModal(),r.addListenerOnClickClose(),r.addListenerOnKeyClose(),s.movieId=t.id,s.getInfoApi().then((e=>{e&&function(e){const{original_title:t,poster_path:l,title:o,vote_average:n,vote_count:i,overview:a,genres:s,popularity:c,id:u}=e;d={original_title:t,id:u,poster_path:l,title:o,vote_average:n,vote_count:i,overview:a,genres:s,popularity:c};const m=`\n      <div class="film-detail">\n    <img class="film-detail__poster" src="${"https://image.tmdb.org/t/p/w500/"+l}" alt="${o}">\n    <h3 class="film-detail__title">${o}</h3>\n    <div class="film-detail__info">\n    <ul class="film-detail__labels list">\n        <li>\n            <p class="film-detail__label">Vote / Votes</p>\n            </li>\n            <li>\n            <p class="film-detail__label">Popularity</p>\n            </li>\n            <li>\n            <p class="film-detail__label">Original Title</p>\n            </li>\n            <li>\n            <p class="film-detail__label">Genre</p>\n        </li>\n    </ul>\n        <ul class="film-detail__data list">\n        <li>\n        <p class="film-detail__meta del"><span class="vote">${n.toFixed(1)}</span> / <span class="votes">${i.toFixed()}</span></p>\n            </li>\n            <li>\n            <p class="film-detail__meta">${c.toFixed(1)}</p>\n            </li>\n            <li>\n            <p class="film-detail__meta title">${t}</p>\n            </li>\n            <li>\n            <p class="film-detail__meta">${s[0].name}</p>\n        </li>\n    </ul>\n</div>\n\n    <h4 class="film-detail__about">ABOUT</h4>\n    <p class="film-detail__overview">${a}</p>\n    <ul class="film-detail buttons">\n        <li><button type="button" class="film-detail__link" data-action="watched">add to Watched</button>\n        </li>\n        <li><button  type="button" class="film-detail__link" data-action="queue">add to queue</button>\n        </li>\n    </ul>\n</div>`;r.modalBox.innerHTML+=m}(e)})),c.modalBox=document.querySelector(".js-modal__box"),c.modalBox.addEventListener("click",(e=>{e.target.nodeName}))}}));
//# sourceMappingURL=index.f5c15430.js.map
